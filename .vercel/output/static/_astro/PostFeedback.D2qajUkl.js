import{e as be,c as U,l as ge,a as ne,u as M,b as le,d as pe,h as P,f as se,E as me,r as Se,H as xe,g as ye,s as ke,i as z,j as Te,k as K,m as we,U as Ee,n as Ie,o as Ne,p as Oe,q as Pe,t as Fe,v as Q,w as Ae,x as _,y as Ce,z as Re,A as He,P as De,B as Le,C as k,D as je,F as Je,G as Be,I as Ue,J as Ye,K as qe,S as Ge,L as Me,M as ie,N as W,O as X,Q as $,R as O,T as Ve,V as Ze,W as L,X as T,Y as w,Z as C,_ as j,$ as q,a0 as ze}from"./render.BoETux7r.js";const Ke="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ke);be();function Qe(t){U===null&&ge(),ne&&U.l!==null?We(U).m.push(t):M(()=>{const a=le(t);if(typeof a=="function")return a})}function We(t){var a=t.l;return a.u??={a:[],b:[],m:[]}}function G(t,a,s=!1){P&&se();var r=t,l=null,n=null,e=Ee,f=s?me:0,c=!1;const o=(d,v=!0)=>{c=!0,S(v,d)};var h=null;function E(){h!==null&&(h.lastChild.remove(),r.before(h),h=null);var d=e?l:n,v=e?n:l;d&&Ne(d),v&&Oe(v,()=>{e?n=null:l=null})}const S=(d,v)=>{if(e===(e=d))return;let g=!1;if(P){const Y=Se(r)===xe;!!e===Y&&(r=ye(),ke(r),z(!1),g=!0)}var p=Ie(),x=r;if(p&&(h=document.createDocumentFragment(),h.append(x=Te())),e?l??=v&&K(()=>v(x)):n??=v&&K(()=>v(x)),p){var i=we,m=e?l:n,y=e?n:l;m&&i.skipped_effects.delete(m),y&&i.skipped_effects.add(y),i.add_callback(E)}else E();g&&z(!0)};pe(()=>{c=!1,a(o),c||S(null,null)},f),P&&(r=Pe)}function ee(t,a,s,r,l){P&&se();var n=a.$$slots?.[s],e=!1;n===!0&&(n=a[s==="default"?"children":s],e=!0),n===void 0||n(t,e?()=>r:r)}const te=[...` 	
\r\fÂ \v\uFEFF`];function Xe(t,a,s){var r=t==null?"":""+t;if(s){for(var l in s)if(s[l])r=r?r+" "+l:l;else if(r.length)for(var n=l.length,e=0;(e=r.indexOf(l,e))>=0;){var f=e+n;(e===0||te.includes(r[e-1]))&&(f===r.length||te.includes(r[f]))?r=(e===0?"":r.substring(0,e))+r.substring(f+1):e=f}}return r===""?null:r}function ae(t,a,s,r,l,n){var e=t.__className;if(P||e!==s||e===void 0){var f=Xe(s,r,n);(!P||f!==t.getAttribute("class"))&&(f==null?t.removeAttribute("class"):t.className=f),t.__className=s}else if(n&&l!==n)for(var c in n){var o=!!n[c];(l==null||o!==!!l[c])&&t.classList.toggle(c,o)}return n}function $e(t=!1){const a=U,s=a.l.u;if(!s)return;let r=()=>Ce(a.s);if(t){let l=0,n={};const e=Re(()=>{let f=!1;const c=a.s;for(const o in c)c[o]!==n[o]&&(n[o]=c[o],f=!0);return f&&l++,l});r=()=>_(e)}s.b.length&&Fe(()=>{re(a,r),Q(s.b)}),M(()=>{const l=le(()=>s.m.map(Ae));return()=>{for(const n of l)typeof n=="function"&&n()}}),s.a.length&&M(()=>{re(a,r),Q(s.a)})}function re(t,a){if(t.l.s)for(const s of t.l.s)_(s);a()}let J=!1;function et(t){var a=J;try{return J=!1,[t(),J]}finally{J=a}}function B(t,a,s,r){var l=!ne||(s&Ue)!==0,n=(s&Ye)!==0,e=r,f=!0,c=()=>(f&&(f=!1,e=r),e),o;{var h=Ge in t||Me in t;o=He(t,a)?.set??(h&&a in t?i=>t[a]=i:void 0)}var E,S=!1;[E,S]=et(()=>t[a]);var d;if(l?d=()=>{var i=t[a];return i===void 0?c():(f=!0,i)}:d=()=>{var i=t[a];return i!==void 0&&(e=void 0),i===void 0?e:i},l&&(s&De)===0)return d;if(o){var v=t.$$legacy;return function(i,m){return arguments.length>0?((!l||!m||v||S)&&o(m?d():i),i):d()}}var g=!1,p=Be(()=>(g=!1,d()));_(p);var x=je;return function(i,m){if(arguments.length>0){const y=m?_(p):l&&n?Le(i):i;return k(p,y),g=!0,e!==void 0&&(e=y),i}return qe&&g||(x.f&Je)!==0?p.v:_(p)}}var tt=ie('<div class="mt-5 flex items-center justify-center"><p class="text-slate-500 text-sm"><!></p></div>'),at=ie('<div class="mt-12 flex flex-col sm:flex-row gap-y-2 items-center justify-center gap-x-2 sm:gap-y-0"><h3 class="text-slate-700"> </h3> <div><button type="button"><!> </button> <button type="button"><!> </button></div></div> <!>',1);function nt(t,a){Ze(a,!1);let s=B(a,"title",8),r=B(a,"firstChoice",8),l=B(a,"secondChoice",8),n=B(a,"slug",8),e=L(0),f=0,c=L(!1),o=L(!1),h=L(null);Qe(()=>{const u=JSON.parse(localStorage.getItem("feedback")||"{}");k(o,!!u[n()]),k(h,u[n()]||null),E()});async function E(){try{const u=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:n()})});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const b=await u.json();k(e,b.helpful||0),f=b.notHelpful||0,k(c,!0)}catch(u){console.error("Failed to fetch feedback count:",u)}}async function S(u){if(!_(o))try{const b=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:n(),type:u})});if(!b.ok)throw new Error(`HTTP error! status: ${b.status}`);const A=await b.json();k(e,A.helpful||0),f=A.notHelpful||0;const R=JSON.parse(localStorage.getItem("feedback")||"{}");R[n()]=u,localStorage.setItem("feedback",JSON.stringify(R)),k(o,!0),k(h,u)}catch(b){console.error("Error submitting feedback:",b)}}$e();var d=at(),v=W(d),g=T(v),p=T(g,!0);w(g);var x=C(g,2),i=T(x);let m;var y=T(i);ee(y,a,"helpfulIcon",{});var Y=C(y);w(i);var F=C(i,2);let V;var Z=T(F);ee(Z,a,"notHelpfulIcon",{});var fe=C(Z);w(F),w(x),w(v);var oe=C(v,2);{var ue=u=>{var b=tt(),A=T(b),R=T(A);{var ce=I=>{var H=q("Fetching...");O(I,H)},de=I=>{var H=ze(),ve=W(H);{var _e=N=>{var D=q("1 person found this helpful");O(N,D)},he=N=>{var D=q();X(()=>j(D,`${_(e)??""} people found this helpful`)),O(N,D)};G(ve,N=>{_(e)===1?N(_e):N(he,!1)},!0)}O(I,H)};G(R,I=>{_(c)?I(de,!1):I(ce)})}w(A),w(b),O(u,b)};G(oe,u=>{_(e)>0&&u(ue)})}X((u,b)=>{j(p,s()),i.disabled=_(o),m=ae(i,1,"group inline-flex items-center gap-x-2 rounded-lg border border-slate-400 px-3 py-2 text-sm font-medium text-slate-700 hover:border-teal-500 hover:bg-teal-500",null,m,u),j(Y,` ${r()??""}`),F.disabled=_(o),V=ae(F,1,"group inline-flex items-center gap-x-2 rounded-lg border border-slate-400 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-300",null,V,b),j(fe,` ${l()??""}`)},[()=>({"bg-teal-500":_(h)==="helpful","border-teal-500":_(h)==="helpful"}),()=>({"bg-slate-300":_(h)==="notHelpful"})]),$("click",i,()=>S("helpful")),$("click",F,()=>S("notHelpful")),O(t,d),Ve()}export{nt as default};
